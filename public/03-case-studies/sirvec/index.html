<!DOCTYPE html>
<html lang="en" dir="auto" data-theme="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>SIRVEC | Product Manager Playbook</title>
<meta name="keywords" content="">
<meta name="description" content="Evidence Tracking &amp; Chain of Custody Platform.">
<meta name="author" content="">
<link rel="canonical" href="https://floriancaumont-cloud.github.io/pm_playbook/03-case-studies/sirvec/">
<link crossorigin="anonymous" href="/pm_playbook/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css" integrity="sha256-2jIR5e&#43;Ge/K3X9WmUVz&#43;1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://floriancaumont-cloud.github.io/pm_playbook/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://floriancaumont-cloud.github.io/pm_playbook/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://floriancaumont-cloud.github.io/pm_playbook/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://floriancaumont-cloud.github.io/pm_playbook/apple-touch-icon.png">
<link rel="mask-icon" href="https://floriancaumont-cloud.github.io/pm_playbook/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://floriancaumont-cloud.github.io/pm_playbook/03-case-studies/sirvec/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
                color-scheme: dark;
            }

            .list {
                background: var(--theme);
            }

            .toc {
                background: var(--entry);
            }
        }

        @media (prefers-color-scheme: light) {
            .list::-webkit-scrollbar-thumb {
                border-color: var(--code-bg);
            }
        }

    </style>
</noscript>
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.querySelector("html").dataset.theme = 'dark';
    } else if (localStorage.getItem("pref-theme") === "light") {
       document.querySelector("html").dataset.theme = 'light';
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector("html").dataset.theme = 'dark';
    } else {
        document.querySelector("html").dataset.theme = 'light';
    }

</script><meta property="og:url" content="https://floriancaumont-cloud.github.io/pm_playbook/03-case-studies/sirvec/">
  <meta property="og:site_name" content="Product Manager Playbook">
  <meta property="og:title" content="SIRVEC">
  <meta property="og:description" content="Evidence Tracking &amp; Chain of Custody Platform.">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="03-case-studies">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="SIRVEC">
<meta name="twitter:description" content="Evidence Tracking &amp; Chain of Custody Platform.">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Case studies",
      "item": "https://floriancaumont-cloud.github.io/pm_playbook/03-case-studies/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "SIRVEC",
      "item": "https://floriancaumont-cloud.github.io/pm_playbook/03-case-studies/sirvec/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "SIRVEC",
  "name": "SIRVEC",
  "description": "Evidence Tracking \u0026 Chain of Custody Platform.",
  "keywords": [
    
  ],
  "articleBody": "SIRVEC — Evidence Tracking \u0026 Chain of Custody Platform Context Product: SIRVEC Client: Guardia Civil Market / Industry: Law Enforcement, Justice, Public Sector Product Type: Web platform + Mobile App Product Stage: Delivery (MVP) Problem Statement The Guardia Civil needed a secure and reliable way to register crime scenes, track evidence, and guarantee the chain of custody from the moment evidence is collected until it is presented in court.\nWhile technology could clearly improve accuracy and traceability, the core risk was not technical.\nThe real problem was:\nIf judges and the justice system do not legally accept the platform and its technology, the product has no value.\nIn particular, the use of blockchain for evidence tracking raised strong concerns in a system historically based on paper documentation and manual signatures.\nGoals \u0026 Success Criteria User Outcomes Officers can register crime scenes digitally Evidence can be tracked end-to-end with full traceability Chain of custody is clear, immutable, and auditable Legal \u0026 Institutional Outcomes Evidence registered through the platform is legally admissible Judges can trust the integrity of the custody chain Compliance with Ministry of Justice guidelines Business Outcomes MVP accepted by the client Platform positioned as a reliable foundation for future expansion Constraints Legal \u0026 Regulatory Blockchain adoption in justice systems is still emerging Strong legal scrutiny from judges and prosecutors Strict compliance with Spanish and European law Ministry of Justice acceptance was mandatory Institutional Evidence handling is the core mission of criminal investigation Zero tolerance for legal ambiguity High reputational and operational risk Product MVP already in delivery Limited room for experimentation in production Technology choices had to be justified, not just implemented Discovery \u0026 Validation Work Key Insight The biggest risk was legal legitimacy, not usability or performance.\nWithout legal acceptance:\nOfficers would not use the platform Evidence could be challenged in court The entire system would be invalidated Validation Approach Instead of user discovery, the focus was on legal discovery:\nUnderstanding how evidence is evaluated by judges Mapping existing legal precedents Translating technical guarantees into legal language Options Considered Option A: Traditional Digital System (No Blockchain) Pros: Easier legal acceptance Cons: Lower guarantees of immutability and traceability Option B: Blockchain Without Legal Backing Pros: Strong technical guarantees Cons: High risk of rejection in court Option C: Blockchain + Formal Legal Justification Pros: Strong technical and legal foundation Cons: Longer validation process Decision \u0026 Rationale We chose Option C:\nUsing blockchain only after proving its legal admissibility.\nThe decision was based on:\nLong-term trust over short-term delivery Legal certainty as a core product requirement Alignment with existing European and Spanish precedents Legal Validation Strategy Actions Taken Engaged a legal specialist (lawyer) with expertise in: European law Spanish case law Blockchain-related legal precedents Produced a formal legal report addressing: Blockchain as a valid mechanism for evidence integrity Compliance with European regulations Spanish judicial cases where blockchain was accepted Outcome Demonstrated that blockchain can be legally used to: Guarantee integrity Ensure immutability Strengthen chain-of-custody evidence This report became a key artifact for client and institutional approval.\nDelivery Summary What Was Built Web platform for evidence registration Mobile app for on-site crime scene usage Blockchain-based custody chain tracking Audit-ready evidence history What Was Critical Beyond Code Legal documentation Clear explanation of technology to non-technical stakeholders Alignment between technical design and legal language Results Qualitative Increased client confidence in the platform Reduced resistance to blockchain usage Stronger trust in the integrity of the custody chain Strategic MVP positioned as legally viable Foundation established for broader institutional adoption What Worked Well Treating legal validation as a product requirement Early involvement of legal expertise Translating technical concepts into judicial language What Didn’t Work Initial underestimation of legal resistance Complexity of aligning legal and technical timelines Need for deeper early engagement with judicial perspectives Key Learnings In regulated environments, legality is a feature Technical truth is not enough without institutional trust Blockchain value must be explained in legal, not technical, terms What I’d Do Differently Involve legal experts even earlier Formalize legal discovery as part of product discovery Create legal-facing documentation in parallel with development Final Takeaway In justice systems, trust is the product.\nTechnology only creates value when it is legally accepted, institutionally trusted, and clearly understood by those who ultimately decide its validity: the judges.\n",
  "wordCount" : "711",
  "inLanguage": "en",
  "datePublished": "0001-01-01T00:00:00Z",
  "dateModified": "0001-01-01T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://floriancaumont-cloud.github.io/pm_playbook/03-case-studies/sirvec/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Product Manager Playbook",
    "logo": {
      "@type": "ImageObject",
      "url": "https://floriancaumont-cloud.github.io/pm_playbook/favicon.ico"
    }
  }
}
</script>
</head>
<body id="top">
    <header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://floriancaumont-cloud.github.io/pm_playbook/" accesskey="h" title="Product Manager Playbook (Alt + H)">Product Manager Playbook</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://floriancaumont-cloud.github.io/pm_playbook/01-foundations/" title="Foundations">
                    <span>Foundations</span>
                </a>
            </li>
            <li>
                <a href="https://floriancaumont-cloud.github.io/pm_playbook/02-templates/" title="Templates">
                    <span>Templates</span>
                </a>
            </li>
            <li>
                <a href="https://floriancaumont-cloud.github.io/pm_playbook/03-case-studies/" title="Case Studies">
                    <span>Case Studies</span>
                </a>
            </li>
            <li>
                <a href="https://floriancaumont-cloud.github.io/pm_playbook/04-frameworks/" title="Frameworks">
                    <span>Frameworks</span>
                </a>
            </li>
            <li>
                <a href="https://floriancaumont-cloud.github.io/pm_playbook/05-resources/" title="Resources">
                    <span>Resources</span>
                </a>
            </li>
            <li>
                <a href="https://floriancaumont-cloud.github.io/pm_playbook/06-tools/" title="Tools">
                    <span>Tools</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://floriancaumont-cloud.github.io/pm_playbook/">Home</a>&nbsp;»&nbsp;<a href="https://floriancaumont-cloud.github.io/pm_playbook/03-case-studies/">Case studies</a></div>
    <h1 class="post-title entry-hint-parent">
      SIRVEC
    </h1>
    <div class="post-description">
      Evidence Tracking &amp; Chain of Custody Platform.
    </div>
    <div class="post-meta"><span>4 min</span>

</div>
  </header> 
  <div class="post-content"><h1 id="sirvec--evidence-tracking--chain-of-custody-platform">SIRVEC — Evidence Tracking &amp; Chain of Custody Platform<a hidden class="anchor" aria-hidden="true" href="#sirvec--evidence-tracking--chain-of-custody-platform">#</a></h1>
<h2 id="context">Context<a hidden class="anchor" aria-hidden="true" href="#context">#</a></h2>
<ul>
<li><strong>Product:</strong> SIRVEC</li>
<li><strong>Client:</strong> Guardia Civil</li>
<li><strong>Market / Industry:</strong> Law Enforcement, Justice, Public Sector</li>
<li><strong>Product Type:</strong> Web platform + Mobile App</li>
<li><strong>Product Stage:</strong> Delivery (MVP)</li>
</ul>
<hr>
<h2 id="problem-statement">Problem Statement<a hidden class="anchor" aria-hidden="true" href="#problem-statement">#</a></h2>
<p>The Guardia Civil needed a secure and reliable way to <strong>register crime scenes, track evidence, and guarantee the chain of custody</strong> from the moment evidence is collected until it is presented in court.</p>
<p>While technology could clearly improve accuracy and traceability, the <strong>core risk was not technical</strong>.</p>
<p>The real problem was:</p>
<blockquote>
<p>If judges and the justice system do not legally accept the platform and its technology, the product has no value.</p>
</blockquote>
<p>In particular, the use of <strong>blockchain for evidence tracking</strong> raised strong concerns in a system historically based on <strong>paper documentation and manual signatures</strong>.</p>
<hr>
<h2 id="goals--success-criteria">Goals &amp; Success Criteria<a hidden class="anchor" aria-hidden="true" href="#goals--success-criteria">#</a></h2>
<h3 id="user-outcomes">User Outcomes<a hidden class="anchor" aria-hidden="true" href="#user-outcomes">#</a></h3>
<ul>
<li>Officers can register crime scenes digitally</li>
<li>Evidence can be tracked end-to-end with full traceability</li>
<li>Chain of custody is clear, immutable, and auditable</li>
</ul>
<h3 id="legal--institutional-outcomes">Legal &amp; Institutional Outcomes<a hidden class="anchor" aria-hidden="true" href="#legal--institutional-outcomes">#</a></h3>
<ul>
<li>Evidence registered through the platform is legally admissible</li>
<li>Judges can trust the integrity of the custody chain</li>
<li>Compliance with Ministry of Justice guidelines</li>
</ul>
<h3 id="business-outcomes">Business Outcomes<a hidden class="anchor" aria-hidden="true" href="#business-outcomes">#</a></h3>
<ul>
<li>MVP accepted by the client</li>
<li>Platform positioned as a reliable foundation for future expansion</li>
</ul>
<hr>
<h2 id="constraints">Constraints<a hidden class="anchor" aria-hidden="true" href="#constraints">#</a></h2>
<h3 id="legal--regulatory">Legal &amp; Regulatory<a hidden class="anchor" aria-hidden="true" href="#legal--regulatory">#</a></h3>
<ul>
<li>Blockchain adoption in justice systems is still emerging</li>
<li>Strong legal scrutiny from judges and prosecutors</li>
<li>Strict compliance with Spanish and European law</li>
<li>Ministry of Justice acceptance was mandatory</li>
</ul>
<h3 id="institutional">Institutional<a hidden class="anchor" aria-hidden="true" href="#institutional">#</a></h3>
<ul>
<li>Evidence handling is the <strong>core mission</strong> of criminal investigation</li>
<li>Zero tolerance for legal ambiguity</li>
<li>High reputational and operational risk</li>
</ul>
<h3 id="product">Product<a hidden class="anchor" aria-hidden="true" href="#product">#</a></h3>
<ul>
<li>MVP already in delivery</li>
<li>Limited room for experimentation in production</li>
<li>Technology choices had to be justified, not just implemented</li>
</ul>
<hr>
<h2 id="discovery--validation-work">Discovery &amp; Validation Work<a hidden class="anchor" aria-hidden="true" href="#discovery--validation-work">#</a></h2>
<h3 id="key-insight">Key Insight<a hidden class="anchor" aria-hidden="true" href="#key-insight">#</a></h3>
<p>The biggest risk was <strong>legal legitimacy</strong>, not usability or performance.</p>
<p>Without legal acceptance:</p>
<ul>
<li>Officers would not use the platform</li>
<li>Evidence could be challenged in court</li>
<li>The entire system would be invalidated</li>
</ul>
<h3 id="validation-approach">Validation Approach<a hidden class="anchor" aria-hidden="true" href="#validation-approach">#</a></h3>
<p>Instead of user discovery, the focus was on <strong>legal discovery</strong>:</p>
<ul>
<li>Understanding how evidence is evaluated by judges</li>
<li>Mapping existing legal precedents</li>
<li>Translating technical guarantees into legal language</li>
</ul>
<hr>
<h2 id="options-considered">Options Considered<a hidden class="anchor" aria-hidden="true" href="#options-considered">#</a></h2>
<h3 id="option-a-traditional-digital-system-no-blockchain">Option A: Traditional Digital System (No Blockchain)<a hidden class="anchor" aria-hidden="true" href="#option-a-traditional-digital-system-no-blockchain">#</a></h3>
<ul>
<li>Pros: Easier legal acceptance</li>
<li>Cons: Lower guarantees of immutability and traceability</li>
</ul>
<h3 id="option-b-blockchain-without-legal-backing">Option B: Blockchain Without Legal Backing<a hidden class="anchor" aria-hidden="true" href="#option-b-blockchain-without-legal-backing">#</a></h3>
<ul>
<li>Pros: Strong technical guarantees</li>
<li>Cons: High risk of rejection in court</li>
</ul>
<h3 id="option-c-blockchain--formal-legal-justification">Option C: Blockchain + Formal Legal Justification<a hidden class="anchor" aria-hidden="true" href="#option-c-blockchain--formal-legal-justification">#</a></h3>
<ul>
<li>Pros: Strong technical and legal foundation</li>
<li>Cons: Longer validation process</li>
</ul>
<hr>
<h2 id="decision--rationale">Decision &amp; Rationale<a hidden class="anchor" aria-hidden="true" href="#decision--rationale">#</a></h2>
<p>We chose <strong>Option C</strong>:<br>
Using blockchain <strong>only after proving its legal admissibility</strong>.</p>
<p>The decision was based on:</p>
<ul>
<li>Long-term trust over short-term delivery</li>
<li>Legal certainty as a core product requirement</li>
<li>Alignment with existing European and Spanish precedents</li>
</ul>
<hr>
<h2 id="legal-validation-strategy">Legal Validation Strategy<a hidden class="anchor" aria-hidden="true" href="#legal-validation-strategy">#</a></h2>
<h3 id="actions-taken">Actions Taken<a hidden class="anchor" aria-hidden="true" href="#actions-taken">#</a></h3>
<ul>
<li>Engaged a <strong>legal specialist (lawyer)</strong> with expertise in:
<ul>
<li>European law</li>
<li>Spanish case law</li>
<li>Blockchain-related legal precedents</li>
</ul>
</li>
<li>Produced a <strong>formal legal report</strong> addressing:
<ul>
<li>Blockchain as a valid mechanism for evidence integrity</li>
<li>Compliance with European regulations</li>
<li>Spanish judicial cases where blockchain was accepted</li>
</ul>
</li>
</ul>
<h3 id="outcome">Outcome<a hidden class="anchor" aria-hidden="true" href="#outcome">#</a></h3>
<ul>
<li>Demonstrated that blockchain can be legally used to:
<ul>
<li>Guarantee integrity</li>
<li>Ensure immutability</li>
<li>Strengthen chain-of-custody evidence</li>
</ul>
</li>
</ul>
<p>This report became a <strong>key artifact</strong> for client and institutional approval.</p>
<hr>
<h2 id="delivery-summary">Delivery Summary<a hidden class="anchor" aria-hidden="true" href="#delivery-summary">#</a></h2>
<h3 id="what-was-built">What Was Built<a hidden class="anchor" aria-hidden="true" href="#what-was-built">#</a></h3>
<ul>
<li>Web platform for evidence registration</li>
<li>Mobile app for on-site crime scene usage</li>
<li>Blockchain-based custody chain tracking</li>
<li>Audit-ready evidence history</li>
</ul>
<h3 id="what-was-critical-beyond-code">What Was Critical Beyond Code<a hidden class="anchor" aria-hidden="true" href="#what-was-critical-beyond-code">#</a></h3>
<ul>
<li>Legal documentation</li>
<li>Clear explanation of technology to non-technical stakeholders</li>
<li>Alignment between technical design and legal language</li>
</ul>
<hr>
<h2 id="results">Results<a hidden class="anchor" aria-hidden="true" href="#results">#</a></h2>
<h3 id="qualitative">Qualitative<a hidden class="anchor" aria-hidden="true" href="#qualitative">#</a></h3>
<ul>
<li>Increased client confidence in the platform</li>
<li>Reduced resistance to blockchain usage</li>
<li>Stronger trust in the integrity of the custody chain</li>
</ul>
<h3 id="strategic">Strategic<a hidden class="anchor" aria-hidden="true" href="#strategic">#</a></h3>
<ul>
<li>MVP positioned as legally viable</li>
<li>Foundation established for broader institutional adoption</li>
</ul>
<hr>
<h2 id="what-worked-well">What Worked Well<a hidden class="anchor" aria-hidden="true" href="#what-worked-well">#</a></h2>
<ul>
<li>Treating legal validation as a product requirement</li>
<li>Early involvement of legal expertise</li>
<li>Translating technical concepts into judicial language</li>
</ul>
<hr>
<h2 id="what-didnt-work">What Didn’t Work<a hidden class="anchor" aria-hidden="true" href="#what-didnt-work">#</a></h2>
<ul>
<li>Initial underestimation of legal resistance</li>
<li>Complexity of aligning legal and technical timelines</li>
<li>Need for deeper early engagement with judicial perspectives</li>
</ul>
<hr>
<h2 id="key-learnings">Key Learnings<a hidden class="anchor" aria-hidden="true" href="#key-learnings">#</a></h2>
<ul>
<li>In regulated environments, <strong>legality is a feature</strong></li>
<li>Technical truth is not enough without institutional trust</li>
<li>Blockchain value must be explained in legal, not technical, terms</li>
</ul>
<hr>
<h2 id="what-id-do-differently">What I’d Do Differently<a hidden class="anchor" aria-hidden="true" href="#what-id-do-differently">#</a></h2>
<ul>
<li>Involve legal experts even earlier</li>
<li>Formalize legal discovery as part of product discovery</li>
<li>Create legal-facing documentation in parallel with development</li>
</ul>
<hr>
<h2 id="final-takeaway">Final Takeaway<a hidden class="anchor" aria-hidden="true" href="#final-takeaway">#</a></h2>
<p>In justice systems, <strong>trust is the product</strong>.</p>
<p>Technology only creates value when it is legally accepted, institutionally trusted, and clearly understood by those who ultimately decide its validity: the judges.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2026 <a href="https://floriancaumont-cloud.github.io/pm_playbook/">Product Manager Playbook</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu');
    if (menu) {
        
        const scrollPosition = localStorage.getItem("menu-scroll-position");
        if (scrollPosition) {
            menu.scrollLeft = parseInt(scrollPosition, 10);
        }
        
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        const html = document.querySelector("html");
        if (html.dataset.theme === "dark") {
            html.dataset.theme = 'light';
            localStorage.setItem("pref-theme", 'light');
        } else {
            html.dataset.theme = 'dark';
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
